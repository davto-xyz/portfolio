---
// Componente de indicador de sección para desktop
---

<div class="fixed right-8 top-1/2 transform -translate-y-1/2 z-50 hidden lg:block">
  <nav class="flex flex-col gap-4">
    <!-- Proyectos -->
    <!-- <a href="#projects" class="section-dot group relative">
      <div class="w-3 h-3 rounded-full border-3 border-gray-800 bg-white hover:bg-gold-500 hover:border-gold-500 transition-all duration-300"></div>
      <span class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-gray-950 text-white px-2 py-1 rounded text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
        Proyectos
      </span>
    </a> -->

    <!-- Experiencia -->
    <a href="#experience" class="section-dot group relative">
      <div class="w-3 h-3 rounded-full border-3 border-gray-800 bg-white hover:bg-gold-500 hover:border-gold-500 transition-all duration-300"></div>
      <span class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-gray-950 text-white px-2 py-1 rounded text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
        Experiencia
      </span>
    </a>

    <!-- Habilidades -->
    <a href="#skills" class="section-dot group relative">
      <div class="w-3 h-3 rounded-full border-3 border-gray-800 bg-white hover:bg-gold-500 hover:border-gold-500 transition-all duration-300"></div>
      <span class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-gray-950 text-white px-2 py-1 rounded text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
        Habilidades
      </span>
    </a>
    
    <!-- Sobre mí -->
    <a href="#about" class="section-dot group relative">
      <div class="w-3 h-3 rounded-full border-3 border-gray-800 bg-white hover:bg-gold-500 hover:border-gold-500 transition-all duration-300"></div>
      <span class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-gray-950 text-white px-2 py-1 rounded text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
        Sobre mí
      </span>
    </a>
    
    <!-- Contacto -->
    <a href="#contact" class="section-dot group relative">
      <div class="w-3 h-3 rounded-full border-3 border-gray-800 bg-white hover:bg-gold-500 hover:border-gold-500 transition-all duration-300"></div>
      <span class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-gray-950 text-white px-2 py-1 rounded text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
        Contacto
      </span>
    </a>
  </nav>
</div>

<script>
  // Script para activar el punto según la sección visible
  function updateActiveSection() {
    const sections = [/* 'projects', */ 'experience', 'skills', 'about', 'contact'];
    const dots = document.querySelectorAll('.section-dot');
    
    let activeSection = '';
    
    // Encontrar qué sección está visible
    for (const sectionId of sections) {
      const section = document.getElementById(sectionId);
      if (section) {
        const rect = section.getBoundingClientRect();
        const viewHeight = window.innerHeight;
        
        // Si la sección ocupa más del 50% de la pantalla visible
        if (rect.top < viewHeight * 0.5 && rect.bottom > viewHeight * 0.5) {
          activeSection = sectionId;
          break;
        }
      }
    }
    
    // Actualizar estados de los puntos
    dots.forEach((dot, index) => {
      const circle = dot.querySelector('div');
      const sectionId = sections[index];
      
      if (sectionId === activeSection) {
        circle.classList.add('bg-gold-500', 'border-gold-500');
        circle.classList.remove('bg-white', 'border-gray-800');
      } else {
        circle.classList.remove('bg-gold-500', 'border-gold-500');
        circle.classList.add('bg-white', 'border-gray-800');
      }
    });
  }
  
  // Ejecutar al cargar y al hacer scroll
  document.addEventListener('DOMContentLoaded', updateActiveSection);
  window.addEventListener('scroll', updateActiveSection);
  
  // También ejecutar cuando Astro navegue (SPA)
  document.addEventListener('astro:page-load', updateActiveSection);
</script>

<style>
  .section-dot {
    display: block;
  }
  
  .section-dot:hover .opacity-0 {
    opacity: 1;
  }
</style>